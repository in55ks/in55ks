<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking Page</title>
    <style>
        #iframe-container {
            width: 100%;
            height: 100vh;
            position: relative;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div id="iframe-container">
        <iframe id="tracked-iframe" src="https://edwmpt.com/embed/lf?c=object_container&site=jasmin&cobrandId=&psid=inskkkk&pstool=202_1&psprogram=pps&campaign_id=&category=girl&forcedPerformers[]=AliceGoldie&vp[showChat]=true&vp[chatAutoHide]=true&vp[showCallToAction]=&vp[showPerformerName]=&vp[showPerformerStatus]=&ms_notrack=1&subAffId={SUBAFFID}"></iframe>
    </div>

    <script>
        // Function to extract query parameters from URL
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Function to track conversion
        function trackConversion(clickId) {
            const payout = 50; // Example payout value
            const txid = '78910'; // Example transaction ID
            const status = 'confirmed'; // Example status

            const postbackUrl = `https://zebix.bemobtrk.com/conversion.txt?cid=${clickId}&payout=${payout}&txid=${txid}&status=${status}`;

            fetch(postbackUrl, { method: 'POST' })
                .then(response => {
                    if (response.ok) {
                        console.log('Conversion tracked successfully');
                    } else {
                        console.error('Failed to track conversion');
                    }
                })
                .catch(error => {
                    console.error('Error tracking conversion:', error);
                });
        }

        // Add event listener for iframe load
        document.getElementById('tracked-iframe').addEventListener('load', function() {
            // Extract Click ID from URL
            const clickId = getQueryParam('click_id');
            if (clickId) {
                trackConversion(clickId);
            } else {
                console.error('Click ID not found in URL');
            }
        });
    </script>
</body>
</html>
